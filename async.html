<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>async</h1>
    <script>
        //refrence 
        // https://medium.com/@seancheongzhenxiong/unit-testing-asynchronous-javascript-understanding-the-priority-of-settimeout-and-promises-dafa75541ec5
        // https://medium.com/@seancheongzhenxiong/unit-testing-asynchronous-javascript-understanding-the-priority-of-settimeout-and-promises-dafa75541ec5
        // https://javascript.plainenglish.io/promise-in-javascript-with-all-the-methods-b7357196a57e
        // console.log('dev1')
        // setTimeout(()=>{
        //     console.log('dev2')
        // },1000)
        // console.log('dev3')
        // setTimeout(()=>{
        //     console.log('dev4')
        // })
        // console.log('dev 5')
        // console.log('dev1')
        // console.log('dev3')
        // //timer and promises have more priorty than  fetch
        // fetch('https://jsonplaceholder.typicode.com/posts').then(item=>item.json()).then(res=>console.log(res))
        // setTimeout(()=>{
        //     console.log('dev4')
        // })

        // console.log('dev 5')

        //promises in js
        //promises creation   //only consuming section is goes to queue
        //   console.log('dev1')
        //     let p1= new Promise((res,rej)=>{
        //         console.log('dev5')
        //         let no=Math.trunc(Math.random()*10)
        //         if(no >5)
        //         {
        //             res('hello i am resolve')
        //         }
        //         else{
        //             rej(' i am reject')
        //         }
        //     })
        //     console.log('dev2')
        //     // setTimeout(()=>{console.log('hello')})
        //    p1.then(item=>{
        //     console.log(item)
        //     console.log('dev3')
        //    }).catch(err=>console.log(err)).finally(()=>{console.log('hello finally')})
        //    console.log('dev4')

        let p1 = new Promise((res, rej) => {
            res('hello p1')
        })
        let p2 = new Promise((res, rej) => {
            setTimeout(() => { res('hello i am p2') }, 2000)
        })
        let p3 = new Promise((res, rej) => {
            setTimeout(() => {
                rej('hello i am p3')
            }, 1000);
        })
        //await till all promises resolve but all must have resolve ,if any promises is rejected it return only rejected one..
        //   let x= Promise.all([p1,p2,p3])
        //    x.then((item)=>{
        //     console.log(item)
        //    }).catch((err)=>{
        //     console.log(err)
        //    })
        //allsettled
        // let x= Promise.allSettled([p1,p2,p3])
        //    x.then((item)=>{
        //     console.log(item)
        //    }).catch((err)=>{
        //     console.log(err)
        //    })

     //any  : it will return only first reslove
    //  let x= Promise.any([p1,p2,p3])
    //        x.then((item)=>{
    //         console.log(item)
    //        }).catch((err)=>{
    //         console.log(err)
    //        })
    //race: it will return only one pormise with one evaluated first (resolve and reject) 
           let x= Promise.race([p1,p2,p3])
           x.then((item)=>{
            console.log(item)
           }).catch((err)=>{
            console.log(err)
           })




    </script>
</body>

</html>